kaz = "Lunar Duck v3.0.0 ðŸŒ¸ kaz.cx"

/* ==UserStyle==
@name         nyaa.si - Lunar Duck
@namespace    kaz.cx
@description  DDG inspired theme for nyaa.si
@author       kaz <x@kaz.cx> (https://kaz.cx)
@homepageURL  https://kaz.cx/lunar-duck
@supportURL   https://github.com/xrkaz/personal-stylesheets/issues
@updateURL    https://raw.githubusercontent.com/xrkaz/personal-stylesheets/master/css/nyaa.si.user.css
@preprocessor stylus
@version      3.0.0
@license      WTFPL
===================
@var select cs "Color scheme" {
  "Mayu":"csMayu",
  "Kiyoteru*":"csKiyoteru",
  "Miku":"csMiku",
  "Luka":"csLuka",
  "Ren":"csRen",
  "Meiko":"csMeiko",
  "Kaito":"csKaito",
  "Gumi":"csGumi"
}
@var select ac "Accent color" {
  "Default":"acDefault",
  "Blue":"acBlue",
  "Cyan":"acCyan",
  "Pink":"acPink",
  "Yellow":"acYellow",
  "Red":"acRed",
  "Green":"acGreen"
}
@var range imgSat "Image saturation" [100, 0, 100, 1, '%']
@var range imgLit "Image brightness" [100, 0, 100, 1, '%']
@var range avaSat "Avatar saturation" [100, 0, 100, 1, '%']
@var range avaLit "Avatar brightness" [100, 0, 100, 1, '%']
@var select avaShape "Avatar shape" {
  "Circle*":"100%",
  "Square":"0",
  "Squircle":"25%",
}
@var select tbDensity "Table density" {
  "Default*":"none",
  "Comfortable":"10px",
  "Compact":"tbCompact"
}
@var select comDensity "Comment density" {
  "Default*":"none",
  "Compact":"comCompact"
}
@var select prad "Corners" {
  "Sharp":"0",
  "Rounded*":"4px"
}
@var checkbox navTop "Sticky navbar" 1
@var checkbox imgShad "Image shadows" 1
@var checkbox avaShad "Avatar shadows" 1
@var checkbox hilitRows "Highlight rows on hover" 1
@var checkbox tColors "Torrent colors" 1
@var checkbox tMarks "Torrent color marks" 0
@var checkbox uLinks "Underline links on hover" 0
@var checkbox splitrows "Split same-colored rows" 0
@var checkbox setLayout "Override layout width" 0
@var range layoutWidth "â€” Layout width" [1400, 1150, 1900, 1,"px"]
@var text fontName "Font name" "Default"
@var select fontStyle "Font style" {
  "Default*":"null",
  "Normal":"normal",
  "Italic":"italic",
  "Oblique":"oblique"
}
@var select fontWeight "Font weight" {
  "Default*":"null",
  "100 ":"100",
  "200 ":"200",
  "300 ":"300",
  "400 (Normal)":"400",
  "500 ":"500",
  "600 ":"600",
  "700 (Bold)":"700",
  "800 ":"800",
  "900 ":"900"
}
@var checkbox xrkaz "Userstyle attribution" 1
==/UserStyle== */

@-moz-document regexp("https?:\\/\\/(.+\\.)?(nyaa|fap(?!\\.lol))\\.(si|lol|iss\\.(one|ink))\\/.*")
  
  // aliases
  i = !important
  l = lightness
  s = saturation
  a = alpha
  Default = null
  
  :root
    color-scheme dark
      
  // mixins
  transit(k = 0.3s)
    if setTransit
      transition all k ease
  shad()
    box-shadow 0 1px 3px hsla(0, 0%, 0%, .5)
  rad()
    border-radius prad
  shard()
    shad();rad()
        
  // static base colors
  sBlack = hsl(0, 0%, 0%)
  sWhite = hsl(0, 0%, 100%)
  sBlue = hsl(225, 100%, 70%)
  sGreen = hsl(120, 50%, 50%)
  sRed = hsl(0, 50%, 50%)
  sOrange = hsl(35, 50%, 50%)
  sPink = hsl(330, 50%, 50%)
  sCyan = hsl(180, 50%, 50%)
  sYellow = hsl(60, 50%, 50%)
  
  sBlue1 = l(s(sBlue, 30%), 20%) // darker
  sBlue2 = l(sBlue, 80%) // lighter
  sGreen1 = l(s(sGreen, 30%), 20%)
  sGreen2 = l(sGreen, 80%)
  sRed1 = l(s(sRed, 30%), 20%)
  sRed2 = l(sRed, 80%)
  sOrange1 = l(s(sOrange, 30%), 20%)
  sOrange2 = l(sOrange, 80%)
  sPink1 = l(s(sPink, 30%), 20%)
  sPink2 = l(sPink, 80%)
  sCyan1 = l(s(sCyan, 30%), 20%)
  sCyan2 = l(sCyan, 80%)
  sYellow1 = l(s(sYellow, 30%), 20%)
  sYellow2 = l(sYellow, 80%)
  
  fg1 = a(sWhite, 0.8) // default
  fg2 = sWhite // active
  fg3 = a(sWhite, 0.5) // subtext
  fg4 = a(sWhite, 0.3) // placeholder
  
  // color schemes
  if cs == "csKiyoteru"
    bg1 = l(sBlack, 10%)
    bg2 = l(sBlack, 5%)
    bg3 = l(sBlack, 15%)
    bg4 = l(sBlack, 20%)
    bg5 = l(sBlack, 25%)
    bg6 = l(sBlack, 45%)
    ac1 = sBlue
    ac2 = sBlue2
  else if cs == "csLuka"
    bg1 = l(s(sPink, 20%), 10%)
    bg2 = l(s(sPink, 20%), 5%)
    bg3 = l(s(sPink, 30%), 15%)
    bg4 = l(s(sPink, 30%), 20%)
    bg5 = l(s(sPink, 40%), 25%)
    bg6 = l(s(sPink, 40%), 45%)
    ac1 = sPink
    ac2 = sPink2
  else if cs == "csMiku"
    bg1 = l(s(sCyan, 20%), 10%)
    bg2 = l(s(sCyan, 20%), 5%)
    bg3 = l(s(sCyan, 30%), 15%)
    bg4 = l(s(sCyan, 30%), 20%)
    bg5 = l(s(sCyan, 40%), 25%)
    bg6 = l(s(sCyan, 40%), 45%)
    ac1 = sCyan
    ac2 = sCyan2
  else if cs == "csRen"
    bg1 = l(s(sYellow, 20%), 10%)
    bg2 = l(s(sYellow, 20%), 5%)
    bg3 = l(s(sYellow, 30%), 15%)
    bg4 = l(s(sYellow, 30%), 20%)
    bg5 = l(s(sYellow, 40%), 25%)
    bg6 = l(s(sYellow, 40%), 45%)
    ac1 = sYellow
    ac2 = sYellow2
  else if cs == "csMeiko"
    bg1 = l(s(sRed, 20%), 10%)
    bg2 = l(s(sRed, 20%), 5%)
    bg3 = l(s(sRed, 30%), 15%)
    bg4 = l(s(sRed, 30%), 20%)
    bg5 = l(s(sRed, 40%), 25%)
    bg6 = l(s(sRed, 40%), 45%)
    ac1 = sRed
    ac2 = sRed2
  else if cs == "csGumi"
    bg1 = l(s(sGreen, 20%), 10%)
    bg2 = l(s(sGreen, 20%), 5%)
    bg3 = l(s(sGreen, 30%), 15%)
    bg4 = l(s(sGreen, 30%), 20%)
    bg5 = l(s(sGreen, 40%), 25%)
    bg6 = l(s(sGreen, 40%), 45%)
    ac1 = sGreen
    ac2 = sGreen2
  else if cs == "csKaito"
    bg1 = l(s(sBlue, 20%), 10%)
    bg2 = l(s(sBlue, 20%), 5%)
    bg3 = l(s(sBlue, 30%), 15%)
    bg4 = l(s(sBlue, 30%), 20%)
    bg5 = l(s(sBlue, 40%), 25%)
    bg6 = l(s(sBlue, 40%), 45%)
    ac1 = sBlue
    ac2 = sBlue2
  else if cs == "csMayu"
    bg1 = sBlack
    bg2 = sBlack
    bg3 = l(sBlack, 5%)
    bg4 = l(sBlack, 10%)
    bg5 = l(sBlack, 15%)
    bg6 = l(sBlack, 20%)
    ac1 = sRed
    ac2 = sRed2
  
  // accent colors
  if ac == "acDefault"
    null
  else if ac == "acBlue"
    ac1 = sBlue
    ac2 = sBlue2
  else if ac == "acPink"
    ac1 = sPink
    ac2 = sPink2
  else if ac == "acCyan"
    ac1 = sCyan
    ac2 = sCyan2
  else if ac == "acYellow"
    ac1 = sYellow
    ac2 = sYellow2
  else if ac == "acRed"
    ac1 = sRed
    ac2 = sRed2
  else if ac == "acGreen"
    ac1 = sGreen
    ac2 = sGreen2
  
  // make torrent colors discernible
  if tMarks
    tr.danger > td:nth-of-type(8)
      border-right 5px solid red
    tr.success > td:nth-of-type(8)
      border-right 5px solid green
    tr.warn > td:nth-of-type(8)
      border-right 5px solid orange
      
  // custom font code integrated from https://userstyles.world/style/85 (vednoc, MIT License)
  // Exclude default code areas.
  n ?= ':not(code):not(pre):not(pre > span):not(code > span)'
  // Exclude icon fonts.
  n += ':not(.i):not(.icon)'
  n += ':not(.fa):not(.fab):not(.fad):not(.fal):not(.far):not(.fas)'
  n += ':not(.fa-solid):not(.fa-regular):not(.fa-light):not(.fa-duotone):not(.fa-thin):not(.fa-sharp):not(.fa-brands)'
  n += ':not([class*="octicon-"])' // github
  n += ':not(.glyphicon)' // searx
  n += ':not([aria-hidden=true])' // google meet
  n += ':not([class*=material-icons])' // material icons
  n += ':not([class*=icofont])' // icofont icons
  n += ':not([class*=selector__glyph][data-bind])' // fontello icons
  // Exclude icons on DuckDuckGo.
  n += ':not(input[id^="search"][type=submit][value=S])' // search bar
  n += ':not([class*="js-side-menu-"])' // navbar menu
  n += ':not(.ddgsi):not(.btn--icon)' // misc icons
  // Exclude code areas on GitHub.
  n += ':not([class^="blob-"]):not([class^="blob-"] span)'
  // Exclude code areas on GitLab.
  n += ':not(.diff-line-num):not(pre > code > span span)'
  n += ':not(.diff-viewer *)' // commit diff
  // Exclude various text editors.
  n += ':not(.ace_editor):not(.ace_editor *)' // #2
  n += ':not(.CodeMirror):not(.CodeMirror *)'
  n += ':not(.monaco-editor *)'
  n += ':not(#squire *)' // protonmail
  // Exclude Gmail composer and font menu. #3
  n += ':not(div[jsaction][jslog] *)'
  n += ':not([id][style*="font-family"]):not([id][style*="font-family"] *)'
  // Exclude utility classes for fonts.
  n += ':not(.monospace):not(.text-mono)'
  { n } // apply only if values are not null
    font-family fontName i if fontName
    font-style fontStyle i if fontStyle
    font-weight fontWeight i if fontWeight
  
  // adjust container width
  if setLayout
    .container
      width layoutWidth
    
  // hide dark mode toggle
  footer p
    display none
  
  // show alert if onsite dark theme is enabled
  .dark::before
    content "Theme conflict. Press the button below to fix it."
    shad()
    font-family monospace
    font-size 14px
    padding 10px 10px 10px 10px
    background sCyan1
    color fg1
    white-space pre-wrap
    display block
    z-index 1001
    position sticky
    top 0
  .dark footer p
    position fixed
    top 50px
    left 10px
    display block
    z-index 1001
    visibility hidden
  .dark #themeToggle
    display block
    margin-top -20px
    visibility hidden
    &:hover::after
      background-color bg6
  .dark #themeToggle::after
    content "Fix me, Senpai (â—•ï¸¿â—•âœ¿)"
    display block
    color sWhite
    margin-top -20px
    visibility visible
    background-color bg1
    border 1px solid bg6
    background-image url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAeCAYAAADtlXTHAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4QwGBBwIHvKt6QAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAL0lEQVQI12NoaGgQZ2JgYGBkYmBgYGZiYGBggrMY4VxsYsyoskQQCB2MWAxAMhkADVECDhlW9CoAAAAASUVORK5CYII=')
    padding 5px 10px 5px 10px
    shad()
    transit()
  
  body
    background-color bg1
    color fg1
  a
    color ac1
    &:hover, &:focus
      color ac2
      text-decoration none
      outline none // for categories in search
      if uLinks
        text-decoration underline
  blockquote
    shard()
    background-color bg1
    border-left 5px solid bg5
  pre
    shard()
    background-color bg1
    color fg1
    border-color bg1
  code
    shard()
    background-color bg5
    color fg1
  pre code
    box-shadow none
  kbd
    shard()
    color fg1
    background-color bg4
  hr
    border-top 1px solid bg4
  
  // navbar
  .navbar
    shad()
  .navbar-inverse
    background-color bg2
    border-color bg3
  .navbar-inverse .navbar-brand
    color fg1
  .navbar-inverse .navbar-brand:hover, .navbar-inverse .navbar-brand:focus
    color fg2
    background-color transparent
  .navbar-inverse .navbar-nav > li > a
    color fg1
  .navbar-inverse .navbar-nav > li > a:hover, .navbar-inverse .navbar-nav > li > a:focus
    background-color transparent
    color fg2
  .navbar-inverse .navbar-nav > .active > a, .navbar-inverse .navbar-nav > .active > a:hover, .navbar-inverse .navbar-nav > .active > a:focus
    background-color bg3
    color fg2
  .navbar-inverse .navbar-nav > .open > a, .navbar-inverse .navbar-nav > .open > a:hover, .navbar-inverse .navbar-nav > .open > a:focus
    background-color bg3
    color fg2
  // navbar mobile
  .navbar-toggle
    background-color bg4
    rad()
  .navbar-inverse .navbar-toggle
    border-color bg4
  .navbar-inverse .navbar-toggle:hover, .navbar-inverse .navbar-toggle:focus
    background-color bg6
  // dropdown menu
  .dropdown-menu
    shard()
    background-color bg3
    border 1px solid bg3
    li a
      color fg1
  .dropdown-menu > li > a:hover, .dropdown-menu > li > a:focus
    background-color bg5
    color fg1
  .dropdown-menu > .active > a, .dropdown-menu > .active > a:hover, .dropdown-menu > .active > a:focus
    background-color bg5
    color fg1
  .bootstrap-select .dropdown-toggle:focus
    outline none i
  // searchbar
  .form-control
    shard()
    background-color bg4
    color fg1
    border 1px solid bg4
    transition none
    &:focus
      box-shadow none
      border-color bg4
  .form-control::placeholder
    color fg4
    opacity 1 // firefox
  .form-control.search-bar
    box-shadow none
  .form-control[disabled], .form-control[readonly], fieldset[disabled] .form-control
    background-color bg3
  .input-group .form-control:last-child, .input-group-addon:last-child
    border 1px solid bg3
  .navbar-form .input-group
    shad()
  .input-group-btn .btn // suppress shadow in search button
    box-shadow none
  #navFilter-criteria > .bootstrap-select:first-child > button
    border-top-left-radius prad i
    border-bottom-left-radius prad i
    
  // make navbar sticky
  if navTop
    .navbar
      position sticky
      top 0
    
  // buttons
  .btn
    rad()
  .btn-default
    background-color bg4
    color fg1
    border-color bg4
  .btn-default:hover, .btn-default:active:hover, .btn-default.active:hover, .btn-default:active, .btn-default.active, .open > .dropdown-toggle.btn-default, .open > .dropdown-toggle.btn-default:hover, .btn-default:active:focus, .btn-default.active:focus, .open > .dropdown-toggle.btn-default:focus, .btn-default:active.focus, .btn-default.active.focus, .open > .dropdown-toggle.btn-default.focus
    background-color bg6
    color fg1
    border 1px solid bg6
  .btn-default:focus, .btn-default.focus
    background-color bg4
    color fg1
    border: 1px solid bg4
    &:hover
      background-color bg6
  .btn:focus, .btn:active:focus, .btn.active:focus, .btn.focus, .btn:active.focus, .btn.active.focus
    outline none
  .btn-primary
    shad()
    color fg1
    background-color bg4
    border 1px solid bg4
  .btn-primary:hover, .btn-primary:active:hover, .btn-primary.active:hover, .open > .dropdown-toggle.btn-primary:hover, .btn-primary:active:focus, .btn-primary.active:focus, .open > .dropdown-toggle.btn-primary:focus, .btn-primary:active.focus, .btn-primary.active.focus, .open > .dropdown-toggle.btn-primary.focus, .btn-primary:focus, .btn-primary.focus
    color fg1
    background-color bg6
    border: 1px solid bg6
  
  // pagination
  .pagination
    shad()
  .pagination-page-info
    margin-top 20px
  .pagination > li > a, .pagination > li > span
    background-color bg4
    color fg1
    border 0
  .pagination > li:first-child > a, .pagination > li:first-child > span
    border-top-left-radius prad
    border-bottom-left-radius prad
  .pagination > li:last-child > a, .pagination > li:last-child > span
    border-top-right-radius prad
    border-bottom-right-radius prad
  .pagination > .disabled > span, .pagination > .disabled > span:hover, .pagination > .disabled > span:focus, .pagination > .disabled > a, .pagination > .disabled > a:hover, .pagination > .disabled > a:focus
    background-color bg3
  .pagination > .active > a, .pagination > .active > span, .pagination > .active > a:hover, .pagination > .active > span:hover, .pagination > .active > a:focus, .pagination > .active > span:focus
    background-color bg5
  .pagination > li > a:hover, .pagination > li > span:hover, .pagination > li > a:focus, .pagination > li > span:focus
    background-color bg6
    color fg1
    
  // table
  // torrent list odd row
  .table-striped > tbody > tr:nth-of-type(2n+1)
    background-color bg3
    if hilitRows != 1
      background-color bg3 i
  // torrent list remake
  .table > thead > tr > td.danger, .table > tbody > tr > td.danger, .table > tfoot > tr > td.danger, .table > thead > tr > th.danger, .table > tbody > tr > th.danger, .table > tfoot > tr > th.danger, .table > thead > tr.danger > td, .table > tbody > tr.danger > td, .table > tfoot > tr.danger > td, .table > thead > tr.danger > th, .table > tbody > tr.danger > th, .table > tfoot > tr.danger > th
    background-color transparent
    if tColors
      background-color sRed1
  .table-hover>tbody>tr>td.danger:hover, .table-hover>tbody>tr>th.danger:hover, .table-hover>tbody>tr.danger:hover>td, .table-hover>tbody>tr:hover>.danger, .table-hover>tbody>tr.danger:hover>th
    if hilitRows != 1 && tColors != 1
      background-color transparent i
  // torrent list trusted
  .table > thead > tr > td.success, .table > tbody > tr > td.success, .table > tfoot > tr > td.success, .table > thead > tr > th.success, .table > tbody > tr > th.success, .table > tfoot > tr > th.success, .table > thead > tr.success > td, .table > tbody > tr.success > td, .table > tfoot > tr.success > td, .table > thead > tr.success > th, .table > tbody > tr.success > th, .table > tfoot > tr.success > th
    background-color transparent
    if tColors
      background-color sGreen1
  .table-hover>tbody>tr>td.success:hover, .table-hover>tbody>tr>th.success:hover, .table-hover>tbody>tr.success:hover>td, .table-hover>tbody>tr:hover>.success, .table-hover>tbody>tr.success:hover>th
    if hilitRows != 1 && tColors != 1
      background-color transparent i
  // torrent list comments
  table.torrent-list tbody .comments
    shard()
    background-color bg4
    color fg1 i
    border 1px solid transparent
    &:hover
      background-color bg6
  // torrent list borders
  .table
    margin-bottom 0
  .table-bordered
    border 5px solid bg3
  .table-responsive
    shard()
  @media screen and (max-width: 991px)
    .table-responsive
      border 5px solid bg3    
  .table-bordered > thead > tr > th, .table-bordered > tbody > tr > th, .table-bordered > tfoot > tr > th, .table-bordered > thead > tr > td, .table-bordered > tbody > tr > td, .table-bordered > tfoot > tr > td
    border 0
  // split same-colored rows
  if splitrows
    tr.success, tr.danger
      border 1px solid bg3
  // torrent list suppress visited link state
  table.torrent-list tbody tr td a:visited
    color ac1
    &:hover, &:focus
      color ac2
  // torrent list selection highlighting
  .table-hover>tbody>tr:hover
    background-color bg1
    if hilitRows
      background-color bg5
  .table-hover>tbody>tr>td.success:hover, .table-hover>tbody>tr>th.success:hover, .table-hover>tbody>tr.success:hover>td, .table-hover>tbody>tr:hover>.success, .table-hover>tbody>tr.success:hover>th
    background-color sGreen1
    if hilitRows
      background-color bg5
  .table-hover>tbody>tr>td.danger:hover, .table-hover>tbody>tr>th.danger:hover, .table-hover>tbody>tr.danger:hover>td, .table-hover>tbody>tr:hover>.danger, .table-hover>tbody>tr.danger:hover>th
    background-color sRed1
    if hilitRows
      background-color bg5
  // torrent description
  #torrent-description .table-bordered
    shard()
    border 5px solid bg4
    border-collapse separate
  #torrent-description .table-bordered thead
    background-color bg1
  #torrent-description .table-striped > tbody > tr:nth-of-type(2n+1)
    background-color bg4
  #torrent-description .table
    margin-bottom 20px
    
  // adjust torrent list padding
  .table > tbody > tr > th, .table > tfoot > tr > th, .table > thead > tr > td, .table > tbody > tr > td, .table > tfoot > tr > td
  table.torrent-list td:first-child
    if tbDensity == "tbCompact"
      padding 0 5px 0 5px
    padding tbDensity
  
  // seed/leech colors
  // individual torrent meta
  .col-md-5 span[style="color: green;"]
    color sGreen i
  .col-md-5 span[style="color: red;"]
    color sRed i
  // torrent list
  table.torrent-list td:nth-child(6), body.dark table.torrent-list > tbody > tr.success > td:nth-child(6), body.dark table.torrent-list > tbody > tr.danger > td:nth-child(6)
    color sGreen
  table.torrent-list td:nth-child(7), body.dark table.torrent-list > tbody > tr.success > td:nth-child(7), body.dark table.torrent-list > tbody > tr.danger > td:nth-child(7)
    color sRed
    
  // panels
  .panel
    shard()
    background-color bg3
  .panel-default
    border-color bg3
  .panel-success
    border-color sGreen1
  .panel-danger
    border-color sRed1
  // panel headings
  .panel-heading
    border-top-right-radius prad - 1px
    border-top-left-radius prad - 1px
    if prad == 0
      border-top-right-radius 0
      border-top-left-radius 0
  .panel-default .panel-heading
    shad()
    background-color bg4
    color fg1
    border-color bg3
  .panel-success .panel-heading
    shad()
    background-color sGreen1
    color sGreen
    border-color sGreen1
  .panel-danger .panel-heading
    shad()
    background-color sRed1
    color sRed
    border-color sRed1
  // panel footer
  .panel-footer
    background-color bg4
    border-top 1px solid bg3
    border-bottom-right-radius prad - 1px
    border-bottom-left-radius prad - 1px
    if prad == 0
      border-bottom-right-radius 0
      border-bottom-left-radius 0
    
  // notification panels
  .alert-info
    background-color sBlue1
    color sBlue
    border-color sBlue1
  // comment panel
  .comment-panel
    shad()
    background-color bg4
    border-color bg4
  // targeted comment (if user clicks on timestamp)
  .comment-panel:target
    shad()
    background-color sBlue1
    border-color sBlue1
  // adjust comment density
  if comDensity == "comCompact"
    .comment-panel
      background-color unset
      width 100%
      border-radius 0
      margin 0
      box-shadow none
      border-color transparent
      border-bottom 1px solid bg4
      &:last-child
        border-bottom 0
      
    .comment-panel .col-md-2
      padding 0
    .comment-details
      margin-bottom 0
    .avatar
      max-width 48px
  
  // category icons
  .category-icon
    filter saturate(50%)
    
  // submitter colors
  .text-success
    color sGreen
    &:hover, &:focus
      color sGreen2 i
  
  // upload page
  // markdown preview
  .well
    shard()
    background-color bg3
    border 1px solid bg3
  .well blockquote
    border-color bg5
  .well .table-bordered
    shard()
    border 5px solid bg4
    border-collapse separate
  .well .table-bordered thead
    background-color bg1
  .well .table-striped > tbody > tr:nth-of-type(2n+1)
    background-color bg4
  .well .table
    margin-bottom 20px
  .well img
    rad()
    box-shadow none
  // input
  #description.form-control
    background-color bg3
    border 1px solid bg3
    border-radius 0px prad prad prad
  .nav-tabs
    border-bottom 0
  .nav-tabs > li.active > a, .nav-tabs > li.active > a:hover, .nav-tabs > li.active > a:focus
    shad()
    color fg1
    background-color bg3
    border-bottom-color bg3
    border 1px solid bg3
    z-index -1
  .nav-tabs > li > a
    border-radius prad prad 0 0
  .nav-tabs > li > a:hover
    border-color bg3
  .nav > li > a:hover, .nav > li > a:focus
    background-color bg2
  // buttons
  .btn-danger
    color fg1
    background-color sRed1
    border-color sRed1
  .btn-warning
    color fg1
    background-color sOrange1
    border-color sOrange1
  .btn-grey
    color fg1
    background-color bg4
    border-color bg4
  
  // images
  // torrent description
  #torrent-description img
    rad()
    box-shadow none
  // user avatars
  .avatar
    rad()
    box-shadow none
  .comment-content img
    rad()
    box-shadow none
  .avatar
    border-radius avaShape
  // adjust image saturation
  #torrent-description img, .comment-content img, .well img
    filter saturate(imgSat) brightness(imgLit)
  .avatar
    filter saturate(avaSat) brightness(avaLit)
  // img box shadows
  if imgShad
    #torrent-description img, .comment-content img, .well img
      shad()
  if avaShad
    .avatar
      shad()

  // rotating color animation
  @keyframes rainbow
    0%
      color sPink
      text-shadow 0 0 10px sPink
    10%
      color sBlue
      text-shadow 0 0 10px sBlue
    20%
      color sCyan
      text-shadow 0 0 10px sCyan
    30%
      color sYellow
      text-shadow 0 0 10px sYellow
    40%
      color sRed
      text-shadow 0 0 10px sRed
    50%
      color sGreen
      text-shadow 0 0 10px sGreen
    60%
      color sOrange
      text-shadow 0 0 10px sOrange
    70%
      color sBlue
      text-shadow 0 0 10px sBlue
    80%
      color sCyan
      text-shadow 0 0 10px sCyan
    90%
      color sYellow
      text-shadow 0 0 10px sYellow
    100%
      color sPink
      text-shadow 0 0 10px sPink

  // show userstyle attribution
  html
    margin-bottom 49px
  if xrkaz
    html
      margin-bottom 0
    html::after
      content kaz
      font-family monospace
      font-size 14px
      display block
      text-align center
      margin-bottom 30px
      animation rainbow 5s infinite

@-moz-document url-prefix("https://nyaa.si/rules"), url-prefix("https://sukebei.nyaa.si/rules")
  
  body > .container
    shard()
    background-color bg3
    padding 0 20px 20px 20px
    margin-bottom 30px
    
@-moz-document url-prefix("https://nyaa.si/help"), url-prefix("https://sukebei.nyaa.si/help")
  
  body > .container
    shard()
    background-color bg3
    padding 0 20px 20px 20px
    margin-bottom 30px
