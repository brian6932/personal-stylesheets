/* ==UserStyle==
@name         nyaa.si - Lunar Duck
@namespace    sabakuran
@description  DDG inspired theme for nyaa.si
@author       sabakuran (https://github.com/sabakuran)
@homepageURL  https://github.com/sabakuran/personal-stylesheets
@supportURL   https://github.com/sabakuran/personal-stylesheets/issues
@updateURL    https://raw.githubusercontent.com/sabakuran/personal-stylesheets/master/css/nyaa.si.user.css
@preprocessor stylus
@version      2.0.1
@license      WTFPL
===================
@var select variant "Color scheme" {
    "Default*":"default",
    "Desert Orchid":"sabakuran"
}
@var checkbox darkTgl "Hide on-site dark mode toggle" 1
@var checkbox imgSat "Adjust image saturation" 1
@var checkbox avaSat "Adjust avatar saturation" 1
@var checkbox imgShad "Enable image shadows" 1
@var checkbox avaShad "Enable avatar shadows" 1
@var checkbox avaRound "Enable rounded avatars" 0
@var checkbox about "Show userstyle attribution" 0
==/UserStyle== */
@-moz-document regexp("https?:\\/\\/(.+\\.)?(nyaa|fap(?!\\.lol))\\.(si|lol|iss\\.(one|ink))\\/.*")
  
  // variables
  i = !important
  pshad = 0 1px 3px #00000080
  prad = 4px
  
  // root entries
  :root
    if variant == "default"
      --main-clr #cccccc
      --main-clr-act #ffffff
      --main-bg #1c1c1c
      --second-bg #161616
      --panel-bg #282828
      --third-bg #434343
      --search-bg #333333
      --search-act #6f6f6f
      --link-clr #678fff
      --link-act #99b4ff
      --success-clr #58b792
      --success-clr-act #8fcfb6
      --success-bg #1d3d30
      --warning-clr #f5a339
      --warning-bg #513613
      --danger-clr #de5833
      --danger-bg #4a1d11
      --info-clr #3fa4f2
      --info-bg #153650
    else if variant == "sabakuran"
      --main-clr #f5dbef
      --main-clr-act #ffffff
      --main-bg #3b2732
      --second-bg #412d38
      --panel-bg #493540
      --third-bg #85787f
      --search-bg #45313c
      --search-act #83757d
      --link-clr #ff368f
      --link-act #ff79b4
      --success-clr #58b792
      --success-clr-act #8fcfb6
      --success-bg #1d3d30
      --warning-clr #f5a339
      --warning-bg #513613
      --danger-clr #de5833
      --danger-bg #4a1d11
      --info-clr #3fa4f2
      --info-bg #153650
    // == custom text for showing off ^_^
    --attrib "Lunar Duck v2.0.0 ðŸŒ¸ sabakuran"

  // scrollbar
  html
    // == chromium
    ::-webkit-scrollbar
      width 15px
    ::-webkit-scrollbar-track
      background-color var(--second-bg)
      border-left 1px solid var(--panel-bg)
    ::-webkit-scrollbar-thumb
      background-color var(--search-bg)
      border-radius 0
      &:hover
        background-color var(--search-act)
    // == firefox
    scrollbar-color var(--search-bg) var(--second-bg)
    scrollbar-width auto
    
  // backbone
  body
    background-color var(--main-bg)
    color var(--main-clr)
  a
    color var(--link-clr)
    background-color transparent
    &:hover, &:focus
      color var(--link-act)
      text-decoration none
      outline none
  blockquote
    background-color var(--main-bg)
    border-left 5px solid var(--third-bg)
    border-radius prad
    box-shadow pshad
  pre
    background-color var(--main-bg)
    color var(--main-clr)
    box-shadow pshad
    border-radius prad
    border-color var(--main-bg)
  code
    background-color var(--third-bg)
    color var(--main-clr)
    border-radius prad
    box-shadow pshad
  pre code
    box-shadow none
  kbd
    box-shadow pshad
    border-radius prad
    color var(--main-clr)
    background-color var(--search-bg)
  hr
    border-top 1px solid var(--search-bg)
    
  // navbar
  .navbar-inverse
    background-color var(--second-bg)
    border-color var(--panel-bg)
  .navbar-inverse .navbar-brand
    color var(--main-clr)
  .navbar-inverse .navbar-brand:hover, .navbar-inverse .navbar-brand:focus
    color var(--main-clr-act)
    background-color transparent
  .navbar-inverse .navbar-nav > li > a
    color var(--main-clr)
  .navbar-inverse .navbar-nav > li > a:hover, .navbar-inverse .navbar-nav > li > a:focus
    background-color transparent
    color var(--main-clr-act)
  .navbar-inverse .navbar-nav > .active > a, .navbar-inverse .navbar-nav > .active > a:hover, .navbar-inverse .navbar-nav > .active > a:focus
    background-color var(--panel-bg)
    color var(--main-clr-act)
  .navbar-inverse .navbar-nav > .open > a, .navbar-inverse .navbar-nav > .open > a:hover, .navbar-inverse .navbar-nav > .open > a:focus
    background-color var(--panel-bg)
    color var(--main-clr-act)
  // == navbar mobile
  .navbar-toggle
    background-color var(--search-bg)
    border-radius prad
  .navbar-inverse .navbar-toggle
    border-color var(--search-bg)
  .navbar-inverse .navbar-toggle:hover, .navbar-inverse .navbar-toggle:focus
    background-color var(--search-act)
  // == dropdown menu
  .dropdown-menu
    background-color var(--panel-bg)
    border 1px solid var(--panel-bg)
    box-shadow pshad
    border-radius prad
    li a
      color var(--main-clr)
  .dropdown-menu > li > a:hover, .dropdown-menu > li > a:focus
    background-color var(--third-bg)
    color var(--main-clr)
  .dropdown-menu > .active > a, .dropdown-menu > .active > a:hover, .dropdown-menu > .active > a:focus
    background-color var(--third-bg)
    color var(--main-clr)
  .bootstrap-select .dropdown-toggle:focus
    outline none i
  // == searchbar
  .form-control
    background-color var(--search-bg)
    color var(--main-clr)
    border 1px solid var(--search-bg)
    transition none
    box-shadow pshad
    border-radius prad
    &:focus
      box-shadow none
      border-color var(--search-bg)
  .form-control.search-bar
    box-shadow none
  .form-control[disabled], .form-control[readonly], fieldset[disabled] .form-control
    background-color var(--panel-bg)
  .input-group .form-control:last-child, .input-group-addon:last-child
    border 1px solid var(--panel-bg)
  .navbar-form .input-group
    box-shadow pshad
  .input-group-btn .btn // === disable shadow in searchbar
    box-shadow none
    
  // buttons
  .btn-default
    background-color var(--search-bg)
    color var(--main-clr)
    border-color var(--search-bg)
  .btn-default:hover, .btn-default:active:hover, .btn-default.active:hover, .btn-default:active, .btn-default.active, .open > .dropdown-toggle.btn-default, .open > .dropdown-toggle.btn-default:hover, .btn-default:active:focus, .btn-default.active:focus, .open > .dropdown-toggle.btn-default:focus, .btn-default:active.focus, .btn-default.active.focus, .open > .dropdown-toggle.btn-default.focus
    background-color var(--search-act)
    color var(--main-clr)
    border 1px solid var(--search-act)
  .btn-default:focus, .btn-default.focus
    background-color var(--search-bg)
    color var(--main-clr)
    border: 1px solid var(--search-bg)
  .btn:focus, .btn:active:focus, .btn.active:focus, .btn.focus, .btn:active.focus, .btn.active.focus
    outline none
  .btn-primary
    color var(--main-clr)
    background-color var(--search-bg)
    border 1px solid var(--search-bg)
    box-shadow pshad
  .btn-primary:hover, .btn-primary:active:hover, .btn-primary.active:hover, .open > .dropdown-toggle.btn-primary:hover, .btn-primary:active:focus, .btn-primary.active:focus, .open > .dropdown-toggle.btn-primary:focus, .btn-primary:active.focus, .btn-primary.active.focus, .open > .dropdown-toggle.btn-primary.focus, .btn-primary:focus, .btn-primary.focus
    color var(--main-clr)
    background-color var(--search-act)
    border: 1px solid var(--search-act)
  
  // pagination
  .pagination
    box-shadow pshad
  .pagination-page-info
    margin-top 20px
  .pagination > li > a, .pagination > li > span
    background-color var(--search-bg)
    color var(--main-clr)
    border 0
  .pagination > .disabled > span, .pagination > .disabled > span:hover, .pagination > .disabled > span:focus, .pagination > .disabled > a, .pagination > .disabled > a:hover, .pagination > .disabled > a:focus
    background-color var(--panel-bg)
  .pagination > .active > a, .pagination > .active > span, .pagination > .active > a:hover, .pagination > .active > span:hover, .pagination > .active > a:focus, .pagination > .active > span:focus
    background-color var(--third-bg)
  .pagination > li > a:hover, .pagination > li > span:hover, .pagination > li > a:focus, .pagination > li > span:focus
    background-color var(--search-act)
    color var(--main-clr)
    
  // table
  // == torrent list odd row
  .table-striped > tbody > tr:nth-of-type(2n+1)
    background-color var(--panel-bg)
  // == torrent list remake
  .table > thead > tr > td.danger, .table > tbody > tr > td.danger, .table > tfoot > tr > td.danger, .table > thead > tr > th.danger, .table > tbody > tr > th.danger, .table > tfoot > tr > th.danger, .table > thead > tr.danger > td, .table > tbody > tr.danger > td, .table > tfoot > tr.danger > td, .table > thead > tr.danger > th, .table > tbody > tr.danger > th, .table > tfoot > tr.danger > th
    background-color var(--danger-bg)
  // == torrent list trusted
  .table > thead > tr > td.success, .table > tbody > tr > td.success, .table > tfoot > tr > td.success, .table > thead > tr > th.success, .table > tbody > tr > th.success, .table > tfoot > tr > th.success, .table > thead > tr.success > td, .table > tbody > tr.success > td, .table > tfoot > tr.success > td, .table > thead > tr.success > th, .table > tbody > tr.success > th, .table > tfoot > tr.success > th
    background-color var(--success-bg)
  // == torrent list comments
  table.torrent-list tbody .comments
    background-color var(--search-bg)
    color var(--main-clr)
    border 1px solid var(--search-bg)
    box-shadow pshad
    border-radius prad
  // == torrent list borders
  .table
    margin-bottom 0
  .table-bordered
    border 5px solid var(--panel-bg)
  .table-responsive
    border-radius prad
    box-shadow pshad
  .table-bordered > thead > tr > th, .table-bordered > tbody > tr > th, .table-bordered > tfoot > tr > th, .table-bordered > thead > tr > td, .table-bordered > tbody > tr > td, .table-bordered > tfoot > tr > td
    border 0
  // == selection highlighting
  .table-hover > tbody > tr:hover,
  .table-hover > tbody > tr > td.danger:hover, .table-hover > tbody > tr > th.danger:hover, .table-hover > tbody > tr.danger:hover > td, .table-hover > tbody > tr:hover > .danger, .table-hover > tbody > tr.danger:hover > th,
  .table-hover > tbody > tr > td.success:hover, .table-hover > tbody > tr > th.success:hover, .table-hover > tbody > tr.success:hover > td, .table-hover > tbody > tr:hover > .success, .table-hover > tbody > tr.success:hover > th
    background-color var(--third-bg)
  // == torrent description
  #torrent-description .table-bordered
    border 5px solid var(--search-bg)
    box-shadow pshad
    border-radius prad
    border-collapse separate
  #torrent-description .table-bordered thead
    background-color var(--main-bg)
  #torrent-description .table-striped > tbody > tr:nth-of-type(2n+1)
    background-color var(--search-bg)
  #torrent-description .table
    margin-bottom 20px
  
  // seed/leech colors
  // == individual torrent meta
  .col-md-5 span[style="color: green;"]
    color var(--success-clr) i
  .col-md-5 span[style="color: red;"]
    color var(--danger-clr) i
  // == torrent list
  table.torrent-list td:nth-child(6), body.dark table.torrent-list > tbody > tr.success > td:nth-child(6), body.dark table.torrent-list > tbody > tr.danger > td:nth-child(6)
    color var(--success-clr)
  table.torrent-list td:nth-child(7), body.dark table.torrent-list > tbody > tr.success > td:nth-child(7), body.dark table.torrent-list > tbody > tr.danger > td:nth-child(7)
    color var(--danger-clr)
    
  // panels
  .panel
    background-color var(--panel-bg)
    border-radius prad
    box-shadow pshad
  .panel-default
    border-color var(--panel-bg)
  .panel-success
    border-color var(--success-bg)
  .panel-danger
    border-color var(--danger-bg)
  // == panel headings
  .panel-default .panel-heading
    background-color var(--search-bg)
    color var(--main-clr)
    border-color var(--panel-bg)
    box-shadow pshad
  .panel-success .panel-heading
    background-color var(--success-bg)
    color var(--success-clr)
    border-color var(--success-bg)
    box-shadow pshad
  .panel-danger .panel-heading
    background-color var(--danger-bg)
    color var(--danger-clr)
    border-color var(--danger-bg)
    box-shadow pshad
  // == panel footer
  .panel-footer
    background-color var(--search-bg)
    border-top 1px solid var(--panel-bg)
  // == notification panels
  .alert-info
    background-color var(--info-bg)
    color var(--info-clr)
    border-color var(--info-bg)
  // == comment panels
  .comment-panel
    background-color var(--search-bg)
    box-shadow pshad
    border-color var(--search-bg)
  // === targeted comment (if user clicks on timestamp)
  .comment-panel:target
    background-color var(--info-bg)
    border-color var(--info-bg)
    box-shadow pshad
  
  // category icons
  .category-icon
    filter saturate(50%)
    
  // submitter colors
  .text-success
    color var(--success-clr)
    &:hover, &:focus
      color var(--success-clr-act) i
  
  // upload page
  // == markdown preview
  .well
    background-color var(--panel-bg)
    border 1px solid var(--panel-bg)
    border-radius prad
    box-shadow pshad
  .well blockquote
    border-color var(--third-bg)
  .well .table-bordered
    border 5px solid var(--search-bg)
    box-shadow pshad
    border-radius prad
    border-collapse separate
  .well .table-bordered thead
    background-color var(--main-bg)
  .well .table-striped > tbody > tr:nth-of-type(2n+1)
    background-color var(--search-bg)
  .well .table
    margin-bottom 20px
  .well img
    border-radius prad
    box-shadow none
  // == input
  #description.form-control
    background-color var(--panel-bg)
    border 1px solid var(--panel-bg)
  .nav-tabs
    border-bottom 0
  .nav-tabs > li.active > a, .nav-tabs > li.active > a:hover, .nav-tabs > li.active > a:focus
    color var(--main-clr)
    background-color var(--panel-bg)
    border-bottom-color var(--panel-bg)
    border 1px solid var(--panel-bg)
  .nav-tabs > li > a:hover
    border-color var(--panel-bg)
  .nav > li > a:hover, .nav > li > a:focus
    background-color var(--second-bg)
  // == buttons
  .btn-danger
    color var(--main-clr)
    background-color var(--danger-bg)
    border-color var(--danger-bg)
  .btn-warning
    color var(--main-clr)
    background-color var(--warning-bg)
    border-color var(--warning-bg)
  .btn-grey
    color var(--main-clr)
    background-color var(--search-bg)
    border-color var(--search-bg)
  
  // images
  // == torrent description
  #torrent-description img
    border-radius prad
    box-shadow none
  // == user avatars
  .avatar
    border-radius prad
    box-shadow none
  .comment-content img
    border-radius prad
    box-shadow none
  // == round avatars
  if avaRound
    .avatar
      border-radius 100%
  // == desaturate
  if imgSat
    #torrent-description img, .comment-content img, .well img
      filter saturate(50%)
  if avaSat
    .avatar
      filter saturate(50%)
  // == img box shadows
  if imgShad
    #torrent-description img, .comment-content img, .well img
      box-shadow pshad
  if avaShad
    .avatar
      box-shadow pshad
    
  // dark mode toggle visibility
  if darkTgl
    footer p
      visibility hidden
      
  // show userstyle attribution
  if about
    footer::before
        content var(--attrib)
